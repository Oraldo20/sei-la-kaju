<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Um mimo para voc√™ üíñ</title>
    <style>
        :root {
            --cor-fundo: #fffafb;
            --cor-card: #ffffff;
            --cor-primaria: #ffccd5;
            --cor-secundaria: #fb6f92;
            --cor-texto: #4a4e69;
        }

        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            user-select: none;
        }

        body {
            margin: 0; padding: 0;
            font-family: Arial, sans-serif; /* Fonte ABNT */
            background-color: var(--cor-fundo);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
            color: var(--cor-texto);
        }

        #topo {
            padding: 15px;
            text-align: center;
            background: var(--cor-card);
            border-bottom: 3px solid var(--cor-primaria);
            z-index: 10;
        }

        #coracao-gigante {
            font-size: 55px;
            display: inline-block;
            transition: transform 0.3s;
        }

        .barra-container {
            width: 70%;
            height: 18px;
            background: #f0f0f0;
            border-radius: 20px;
            margin: 10px auto;
            position: relative;
            border: 2px solid var(--cor-primaria);
        }

        #enchimento {
            width: 0%; height: 100%;
            background: var(--cor-secundaria);
            border-radius: 20px;
            transition: width 0.5s ease;
        }

        #game-stage {
            flex-grow: 1;
            position: relative;
            cursor: crosshair;
            overflow: hidden;
        }

        .objeto {
            position: absolute;
            font-size: 45px;
            transition: transform 0.2s;
            cursor: pointer;
        }

        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .card-fofo {
            background: white;
            padding: 30px;
            border-radius: 30px;
            text-align: center;
            max-width: 85%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .btn {
            background: var(--cor-secundaria);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            box-shadow: 0 4px 0 #d94e73;
            cursor: pointer;
        }

        #canvas-raspadinha { 
            position: absolute; 
            top: 0; left: 0; 
            z-index: 5; 
            touch-action: none; 
        }

        #frase-escondida { 
            position: absolute; 
            width: 80%; left: 10%; top: 40%; 
            text-align: center;
            font-size: 22px; 
            color: var(--cor-secundaria); 
            font-weight: bold;
            z-index: 1;
        }

        #contador-beijos {
            position: absolute;
            top: 10px; right: 10px;
            font-weight: bold;
            color: var(--cor-secundaria);
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            border: 2px solid var(--cor-primaria);
        }

        #final-screen {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #ff85a1;
            color: white;
            z-index: 500;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>

    <div id="topo">
        <div id="coracao-gigante">‚ù§Ô∏è</div>
        <div class="barra-container"><div id="enchimento"></div></div>
    </div>

    <div id="game-stage">
        <div id="frase-escondida"></div>
        <canvas id="canvas-raspadinha"></canvas>
    </div>

    <div id="overlay" class="overlay">
        <div class="card-fofo">
            <h2 id="msg-titulo" style="margin-top:0">Opa!</h2>
            <p id="msg-texto"></p>
            <button class="btn" onclick="proximaFase()">Continuar ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="final-screen">
        <h1 style="font-size: 80px;">‚ú®üíù‚ú®</h1>
        <h2>CONSEGUIMOS!</h2>
        <p style="font-size: 20px; max-width: 300px;">
            Olha s√≥ como esse cora√ß√£o ficou cheio! <br><br>
            Isso √© s√≥ um pouquinho do carinho que eu sinto por voc√™ todos os dias. <br>
            <b>Voc√™ √© incr√≠vel e eu adoro voc√™!</b>
        </p>
    </div>

    <script>
        let faseAtual = 0;
        let progressoTotal = 0;
        const stage = document.getElementById('game-stage');
        const overlay = document.getElementById('overlay');
        const enchimento = document.getElementById('enchimento');

        const roteiro = [
            { t: "Ei, psiu!", txt: "Fiz isso aqui para te deixar mais felizinha kkkkkk,Colete uns beijinhos primeiro" },
            { t: "Ai meu cora√ß√£o...", txt: "Voc√™ √© bem rapida kaju! Olha s√≥ tem um segredo escondido ali na frente.revela pra mim esse segredo" },
            { t: "Sou timido sua tarada kkkkk", txt: " Mas ler isso me deixou feliz... Agora sua miss√£o √© dar uns apert√µezinhos no cora√ß√£o" },
            { t: "Florescer igual uma flor", txt: "vamos regar umas plantinhas para acalmar os animos" },
            { t: "Falta s√≥ mais um pouquinho", txt: "Para terminar, vamos tocar as estrelas agora, elas quase brilham tanto quanto vc lindinha." }
        ];

        function mostrarFase() {
            document.getElementById('msg-titulo').innerText = roteiro[faseAtual].t;
            document.getElementById('msg-texto').innerText = roteiro[faseAtual].txt;
            overlay.style.display = 'flex';
        }

        function proximaFase() {
            overlay.style.display = 'none';
            faseAtual++;
            stage.innerHTML = '';
            
            if(faseAtual == 1) jogoChuva();
            if(faseAtual == 2) jogoRaspadinha();
            if(faseAtual == 3) jogoClicker();
            if(faseAtual == 4) jogoFlores();
            if(faseAtual == 5) jogoEstrelas();
        }

        function somarProgresso(qtd) {
            progressoTotal += qtd;
            if(progressoTotal > 100) progressoTotal = 100;
            enchimento.style.width = progressoTotal + '%';
            document.getElementById('coracao-gigante').style.transform = 'scale(1.3)';
            setTimeout(() => { document.getElementById('coracao-gigante').style.transform = 'scale(1)'; }, 200);
            
            if(progressoTotal >= 100) {
                setTimeout(() => { document.getElementById('final-screen').style.display = 'flex'; }, 1000);
            }
        }

        // --- JOGO 1: CHUVA COM OBST√ÅCULOS ---
        function jogoChuva() {
            let beijos = 0;
            const meta = 10;
            const indicador = document.createElement('div');
            indicador.id = 'contador-beijos';
            indicador.innerText = `Beijos: 0 / ${meta}`;
            stage.appendChild(indicador);

            let loop = setInterval(() => {
                const isBad = Math.random() > 0.7;
                const c = document.createElement('div');
                c.className = 'objeto';
                c.innerHTML = isBad ? (Math.random() > 0.5 ? 'üí£' : 'üåµ') : '‚ù§Ô∏è';
                c.style.left = Math.random() * 85 + '%';
                c.style.top = '-60px';
                c.style.transition = 'top 3s linear';
                stage.appendChild(c);
                
                setTimeout(() => { if(stage.contains(c)) c.style.top = '110%'; }, 50);

                const interagir = () => {
                    if(!stage.contains(c)) return;
                    if(isBad) {
                        if(beijos > 0) beijos--;
                        c.innerHTML = 'üí•';
                    } else {
                        beijos++;
                        c.innerHTML = '‚ú®';
                        somarProgresso(2);
                    }
                    indicador.innerText = `Beijos: ${beijos} / ${meta}`;
                    setTimeout(() => { if(stage.contains(c)) c.remove(); }, 150);
                    
                    if(beijos >= meta) {
                        clearInterval(loop);
                        setTimeout(mostrarFase, 1000);
                    }
                };

                c.onmousedown = (e) => { e.preventDefault(); interagir(); };
                c.ontouchstart = (e) => { e.preventDefault(); interagir(); };
                
                // Remove se sair da tela
                setTimeout(() => { if(stage.contains(c)) c.remove(); }, 3200);
            }, 800);
        }

        // --- JOGO 2: RASPADINHA (FIXED) ---
        function jogoRaspadinha() {
            const canvas = document.getElementById('canvas-raspadinha');
            const h = document.getElementById('frase-escondida');
            h.innerText = "Sabe de uma coisa? Voc√™ √© a pessoa mais linda desse mundo!";
            
            canvas.width = stage.clientWidth;
            canvas.height = stage.clientHeight;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = "#ffccd5";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#4a4e69";
            ctx.font = "16px Arial";
            ctx.textAlign = "center";
            ctx.fillText("Raspe aqui com o dedo ou mouse", canvas.width/2, canvas.height/2);

            ctx.globalCompositeOperation = 'destination-out';
            
            let pixelsRaspados = 0;
            let jogoGanho = false;

            function getPos(e) {
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return {
                    x: clientX - rect.left,
                    y: clientY - rect.top
                };
            }

            function scratch(e) {
                if (e.buttons !== 1 && e.type === 'mousemove') return;
                const pos = getPos(e);
                ctx.beginPath();
                ctx.arc(pos.x, pos.y, 35, 0, Math.PI * 2);
                ctx.fill();
                
                pixelsRaspados++;
                // Se raspar o suficiente (aprox 150 movimentos)
                if(pixelsRaspados > 150 && !jogoGanho) {
                    jogoGanho = true;
                    canvas.style.transition = 'opacity 1s';
                    canvas.style.opacity = '0';
                    somarProgresso(20);
                    setTimeout(() => {
                        canvas.remove();
                        mostrarFase();
                    }, 1500);
                }
            }

            canvas.addEventListener('mousemove', scratch);
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); scratch(e); });
        }

        // --- JOGO 3: CLICKER ---
        function jogoClicker() {
            const btn = document.createElement('div');
            btn.innerHTML = 'üíñ';
            btn.style = "font-size:120px; position:absolute; left:50%; top:45%; transform:translate(-50%,-50%); cursor:pointer";
            stage.appendChild(btn);
            let c = 0;
            const click = () => {
                c++;
                btn.style.transform = 'translate(-50%,-50%) scale(1.2)';
                setTimeout(() => btn.style.transform = 'translate(-50%,-50%) scale(1)', 100);
                somarProgresso(2);
                if(c >= 10) setTimeout(mostrarFase, 1000);
            };
            btn.onmousedown = click;
            btn.ontouchstart = (e) => { e.preventDefault(); click(); };
        }

        // --- JOGO 4: FLORES ---
        function jogoFlores() {
            let fCount = 0;
            for(let i=0; i<5; i++) {
                const f = document.createElement('div');
                f.className = 'objeto';
                f.innerHTML = 'üå±';
                f.style.left = (15 + i*17) + '%';
                f.style.top = (30 + Math.random()*40) + '%';
                stage.appendChild(f);
                
                const crescer = () => {
                    if(f.innerHTML == 'üå±') {
                        f.innerHTML = 'üå∏';
                        fCount++;
                        somarProgresso(4);
                        if(fCount >= 5) setTimeout(mostrarFase, 1000);
                    }
                };
                f.onmousedown = crescer;
                f.ontouchstart = (e) => { e.preventDefault(); crescer(); };
            }
        }

        // --- JOGO 5: ESTRELAS ---
        function jogoEstrelas() {
            let eCount = 0;
            let loop = setInterval(() => {
                const s = document.createElement('div');
                s.className = 'objeto';
                s.innerHTML = '‚≠ê';
                s.style.left = Math.random()*85 + '%';
                s.style.top = Math.random()*85 + '%';
                stage.appendChild(s);
                setTimeout(() => { if(stage.contains(s)) s.remove(); }, 1200);

                const pegar = () => {
                    s.innerHTML = '‚ú®';
                    eCount++;
                    somarProgresso(4);
                    if(eCount >= 5) { clearInterval(loop); somarProgresso(1); }
                };
                s.onmousedown = pegar;
                s.ontouchstart = (e) => { e.preventDefault(); pegar(); };
            }, 900);
        }

        window.onload = mostrarFase;
    </script>
</body>
</html>
